(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{230:function(e,t,n){},231:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a,r,c=n(1),i=n.n(c),s=n(16),o=n.n(s),l=(n(230),n(231),n(27)),u=n(11),d=n.n(u),j=n(26),b=n(34),h=n(13),p=n(23),m=n(94),x=n(427),f=n(430),O=n(4),g=Object(x.a)((function(e){return{root:{}}})),v=function(e){var t=g(),n=e.children,a=e.className,r=Object(m.a)(e,["children","className"]);return Object(O.jsx)(f.a,Object(h.a)(Object(h.a)({container:!0,className:t.root+" "+a},r),{},{children:n}))},y=function(e){var t=e.children,n=e.className,a=Object(m.a)(e,["children","className"]);return Object(O.jsx)(f.a,Object(h.a)(Object(h.a)({item:!0,className:n},a),{},{children:t}))},w=n(432),N=n.p+"static/media/image_placeholder.61b9ec86.jpg",k=Object(x.a)((function(e){return{root:{width:"250px"},image:{width:"100%",height:"100%"},input:{display:"none"},buttonContainer:{marginTop:"10px"},button:{width:"100%",backgroundColor:"green",color:"white",fontSize:"20px","&:hover":{color:"black"}}}})),C=function(e){var t=e.onChange,n=e.buttonColor,a=e.defaultImage,r=Object(m.a)(e,["onChange","buttonColor","defaultImage"]),c=i.a.useState(null),s=Object(b.a)(c,2),o=s[0],l=s[1],u=i.a.useState(""),d=Object(b.a)(u,2),j=d[0],p=d[1],x=i.a.useRef(null),f=k(),g=function(){x.current.click()};return Object(O.jsxs)("div",Object(h.a)(Object(h.a)({className:f.root},r),{},{children:[Object(O.jsx)("img",{src:j||a||N,alt:"",className:f.image}),Object(O.jsx)("input",{type:"file",multiple:!1,onChange:function(e){var n=e.target.files[0],a=new FileReader;a.onload=function(e){p(e.target.result)},n&&(a.readAsDataURL(n),l(e.target.files[0]),t&&t(e.target.files[0]))},ref:x,className:f.input}),Object(O.jsx)(v,{className:f.buttonContainer,spacing:2,children:o?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(y,{xs:6,children:Object(O.jsx)(w.a,{onClick:g,className:f.button,variant:"outlined",style:{backgroundColor:n},children:"Change"})}),Object(O.jsx)(y,{xs:6,children:Object(O.jsx)(w.a,{onClick:function(){l(null),t&&t(null),p("")},className:f.button,variant:"outlined",style:{backgroundColor:n},children:"Remove"})})]}):Object(O.jsx)(y,{xs:12,children:Object(O.jsx)(w.a,{onClick:g,className:f.button,variant:"outlined",style:{backgroundColor:n},children:"Add"})})})]}))},S=n(433),I=n(390),A=n(434),B=n(435),U=n(445),W=n(20),E=function(e){return{cardContainer:Object(W.a)({boxShadow:"0 0 10px 0.1px grey",padding:"30px",position:"relative"},e.breakpoints.down("xs"),{padding:"50px 4px 4px 4px",marginTop:"30px"}),errorText:{color:"red"},headerText:{position:"absolute",top:"-20px",color:"white",fontWeight:500,padding:"5px",backgroundColor:"green",borderRadius:"7px"},saveButton:{backgroundColor:"Green",color:"white",marginRight:"10px","&:hover":{color:"black"}}}},M=n(61),T=n(131),R=(0===T.a.apps.length?T.a.initializeApp({apiKey:"AIzaSyBDMcG5dRCUgLxhBJuL7HjCCe_BXiy00z8",authDomain:"real-chat-app-f5075.firebaseapp.com",projectId:"real-chat-app-f5075",storageBucket:"real-chat-app-f5075.appspot.com",messagingSenderId:"660327917921",appId:"1:660327917921:web:b2b8b9d61c0a35733cbd20",measurementId:"G-F93HMN5240"}):T.a.app()).storage().ref(),P=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=R.child(n).child(a.split(".")[0]),e.prev=2,e.next=5,r.put(t);case 5:return c=e.sent,e.next=8,c.ref.getDownloadURL();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),V=n(28),q=n(107),H=n.n(q),F=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a,r){var c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.post(t,n,{headers:{Authorization:r?"Bearer ".concat(r):""}});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:return e.prev=7,e.t0=e.catch(0),i=e.t0.response.data||{error:"unknown Error"},console.log(i),e.abrupt("return",a(i));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.get(t,{headers:{Authorization:a?"Bearer ".concat(a):""}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),c=e.t0.response.data||{error:"unknown Error"},console.log(c),e.abrupt("return",n(c));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),L=Object(V.b)("Auth/SignUp",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.next=3,F("/api/signup",Object(h.a)({},t),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),z=Object(V.b)("Auth/LogIn",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.next=3,F("/api/signin",t,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),X=n(12),J=n(80),K=n.n(J),Y=n(33),Z=function(e){return e.auth},G=Object(Y.a)(Z,(function(e){return e.loading})),Q=Object(Y.a)(Z,(function(e){return e.isSignup})),_=Object(Y.a)(Z,(function(e){return e.isLogin})),$=(Object(Y.a)(Z,(function(e){return e.message})),Object(Y.a)(Z,(function(e){return e.error})),Object(Y.a)(Z,(function(e){return e.user}))),ee={user:null,loading:!1,isSignup:!1,isLogin:!1,token:""},te=Object(V.c)({name:"Auth",initialState:ee,reducers:{logOut:function(e){Object.assign(e,ee)},setLoading:function(e,t){var n=t.payload;e.loading=n}},extraReducers:(a={},Object(W.a)(a,L.pending,(function(e,t){t.payload;e.loading=!0})),Object(W.a)(a,L.fulfilled,(function(e,t){t.payload;e.loading=!1,e.isSignup=!0})),Object(W.a)(a,L.rejected,(function(e,t){Object.assign(e,ee)})),Object(W.a)(a,z.pending,(function(e,t){t.payload;e.loading=!0})),Object(W.a)(a,z.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.isLogin=!0,e.user=n.user,e.token=null===n||void 0===n?void 0:n.token})),Object(W.a)(a,z.rejected,(function(e,t){Object.assign(e,ee)})),a)}),ne=te.actions,ae=ne.logOut,re=ne.setLoading,ce=te.reducer,ie=n(39),se=Object(x.a)((function(e){return Object(h.a)({root:{marginTop:"auto",marginBottom:"auto",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},container:{justifyContent:"center",alignItems:"center",margin:"10px"},imageContainer:{alignItems:"flex-start"},link:{textDecoration:"none"}},E(e))})),oe=function(){var e=i.a.useState(null),t=Object(b.a)(e,2),n=t[0],a=t[1],r=se(),c=Object(X.b)(),s=Object(l.g)(),o=Object(X.c)(G),u=Object(X.c)(Q),m=Object(X.c)(Q),x=M.a().shape({name:M.b().required("name is required").typeError("name can contain only characters").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed"),email:M.b().email("email is not valid").required("email is empty"),password:M.b().min(5,"min lenght 5").required("password is required"),phoneNo:M.b().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is not valid").required("phone Number is required").min(10,"should be 10 character long").max(10,"should be 10 character long")}),f=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(re(!0)),n){e.next=5;break}c(L(t)),e.next=11;break;case 5:return e.next=7,P(n,"userImage");case 7:return a=e.sent,r=K.a.assign(Object(h.a)(Object(h.a)({},t),{},{profilePic:a})),e.next=11,c(L(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.useEffect((function(){(u||m)&&s.push("/auth/login")}),[u,s,m]),Object(O.jsx)(S.a,{className:r.root,children:Object(O.jsx)(v,{justifyContent:"center",alignItems:"center",children:Object(O.jsxs)(y,{xs:12,sm:9,md:6,className:r.cardContainer,children:[Object(O.jsx)(I.a,{variant:"h4",className:r.headerText,children:"Sign Up"}),o?Object(O.jsx)("div",{children:Object(O.jsx)(A.a,{})}):Object(O.jsx)(p.d,{initialValues:{name:"",email:"",password:"",profilePic:"",phoneNo:""},validationSchema:x,enableReinitlization:!0,onSubmit:function(e,t){f(e)},children:function(e){e.values,e.errors,e.setFieldValue;return Object(O.jsxs)(p.c,{children:[Object(O.jsxs)(v,{className:r.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Name"})}),Object(O.jsxs)(y,{xs:10,sm:9,align:"left",children:[Object(O.jsx)(p.b,{fullWidth:!0,name:"name",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)({variant:"outlined",fullWidth:!0},t))}}),Object(O.jsx)(p.a,{name:"name",component:"div",className:r.errorText})]})]}),Object(O.jsxs)(v,{className:r.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Email"})}),Object(O.jsxs)(y,{xs:10,sm:9,align:"left",children:[Object(O.jsx)(p.b,{fullWidth:!0,name:"email",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)({variant:"outlined",fullWidth:!0},t))}}),Object(O.jsx)(p.a,{name:"email",component:"div",className:r.errorText})]})]}),Object(O.jsxs)(v,{className:r.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Password"})}),Object(O.jsxs)(y,{xs:10,sm:9,align:"left",children:[Object(O.jsx)(p.b,{fullWidth:!0,name:"password",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)(Object(h.a)({variant:"outlined",fullWidth:!0},t),{},{type:"password"}))}}),Object(O.jsx)(p.a,{name:"password",component:"div",className:r.errorText})]})]}),Object(O.jsxs)(v,{className:r.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Phone Number"})}),Object(O.jsxs)(y,{xs:10,sm:9,align:"left",children:[Object(O.jsx)(p.b,{fullWidth:!0,name:"phoneNo",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)({variant:"outlined",fullWidth:!0},t))}}),Object(O.jsx)(p.a,{name:"phoneNo",component:"div",className:r.errorText})]})]}),Object(O.jsxs)(v,{className:r.container+" "+r.imageContainer,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Profile Image"})}),Object(O.jsx)(y,{xs:10,sm:9,children:Object(O.jsx)(C,{onChange:a,style:{width:"200px"}})})]}),Object(O.jsx)(v,{className:r.container,children:Object(O.jsx)(y,{xs:12,align:"right",children:Object(O.jsx)(w.a,{className:r.saveButton,type:"submit",children:"Sign Up"})})}),Object(O.jsx)(v,{className:r.container,children:Object(O.jsx)(y,{xs:12,align:"center",children:Object(O.jsx)(I.a,{variant:"h5",children:Object(O.jsx)(ie.b,{to:"/auth/login",className:r.link,children:"Already have an Account?"})})})})]})}})]})})})},le=n(444),ue=Object(x.a)((function(e){return Object(h.a)({root:{marginTop:"auto",marginBottom:"auto",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},container:{justifyContent:"center",alignItems:"center",margin:"10px"},imageContainer:{alignItems:"flex-start"},link:{textDecoration:"none"}},E(e))})),de=function(){var e=ue(),t=Object(X.b)(),n=Object(l.g)(),a=Object(X.c)(G),r=Object(X.c)(_),c=M.a().shape({password:M.b().required("password is required"),phoneNo:M.b().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is not valid").required("phone Number is required")}),s=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(re(!0)),t(z(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.useEffect((function(){r&&n.push("/user")}),[r,n]),Object(O.jsx)(le.a.div,{initial:{scaleY:0},animate:{scaleY:1},exit:{scaleY:0},transition:{duration:.3},children:Object(O.jsx)(S.a,{className:e.root,children:Object(O.jsx)(v,{justifyContent:"center",alignItems:"center",children:Object(O.jsxs)(y,{xs:12,sm:9,md:6,className:e.cardContainer,children:[Object(O.jsx)(I.a,{variant:"h4",className:e.headerText,children:"Sign Up"}),a?Object(O.jsx)("div",{children:Object(O.jsx)(A.a,{})}):Object(O.jsx)(p.d,{initialValues:{password:"",phoneNo:""},validationSchema:c,enableReinitlization:!0,onSubmit:function(e,t){s(e)},children:function(t){t.values,t.errors,t.setFieldValue;return Object(O.jsxs)(p.c,{children:[Object(O.jsxs)(v,{className:e.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Password"})}),Object(O.jsxs)(y,{xs:10,sm:9,align:"left",children:[Object(O.jsx)(p.b,{fullWidth:!0,name:"password",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)(Object(h.a)({variant:"outlined",fullWidth:!0},t),{},{type:"password"}))}}),Object(O.jsx)(p.a,{name:"password",component:"div",className:e.errorText})]})]}),Object(O.jsxs)(v,{className:e.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Phone Number"})}),Object(O.jsxs)(y,{xs:10,sm:9,align:"left",children:[Object(O.jsx)(p.b,{fullWidth:!0,name:"phoneNo",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)({variant:"outlined",fullWidth:!0},t))}}),Object(O.jsx)(p.a,{name:"phoneNo",component:"div",className:e.errorText})]})]}),Object(O.jsx)(v,{className:e.container,children:Object(O.jsx)(y,{xs:12,align:"right",children:Object(O.jsx)(w.a,{className:e.saveButton,type:"submit",children:"LogIn"})})}),Object(O.jsx)(v,{className:e.container,children:Object(O.jsx)(y,{xs:12,align:"center",children:Object(O.jsx)(I.a,{variant:"h5",children:Object(O.jsx)(ie.b,{to:"/auth/signup",className:e.link,children:"Create New Account?"})})})})]})}})]})})})})},je=n(436),be=n(437),he=n(438),pe=n(439),me=n(440),xe=n(216),fe=n(451),Oe=n(208),ge=n.n(Oe),ve=Object(V.b)("Conversation/getAll",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,c=n.getState,i=null===(a=c().auth)||void 0===a?void 0:a.token,e.next=4,D("/api/p2p/allconversation",r,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ye=Object(V.b)("Conversation/getById",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,c=n.getState,i=null===(a=c().auth)||void 0===a?void 0:a.token,e.next=4,D("/api/p2p/getConversationById/".concat(t),r,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),we=Object(V.b)("Conversation/sendMessage",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r,c,i,s,o,l,u,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.rcvNumber,s=t.msgBody,o=t.genId,l=n.rejectWithValue,u=n.getState,(0,n.dispatch)({type:"Conversation/addMsg",payload:{sender:null===(a=u().auth)||void 0===a?void 0:a.user._id,msgBody:s,genId:o,userId:null===(r=u().auth)||void 0===r?void 0:r.user._id}}),j=null===(c=u().auth)||void 0===c?void 0:c.token,e.next=6,F("/api/p2p/sendmessage",{rcvNumber:i,msgBody:s,genId:o},l,j);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ne=Object(V.b)("Conversation/sendMessageNew",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r,c,i,s,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rcvNumber,c=t.msgBody,i=t.genId,s=n.rejectWithValue,o=n.getState,n.dispatch,l=null===(a=o().auth)||void 0===a?void 0:a.token,e.next=5,F("/api/p2p/sendmessage/new",{rcvNumber:r,msgBody:c,genId:i},s,l);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ke=Object(V.b)("Conversation/seenMessage",function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r,c,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.phoneNo,c=n.rejectWithValue,i=n.getState,s=null===(a=i().auth)||void 0===a?void 0:a.token,e.next=5,F("/api/p2p/msgseen",{phoneNo:r},c,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ce={list:[],loading:!1,conversation:{}},Se=Object(V.c)({name:"Conversation",initialState:Ce,reducers:{addMsg:function(e,t){var n,a,r,c,i=t.payload;e.conversation&&(null===(n=e.conversation)||void 0===n?void 0:n.messages)&&i.sender&&(i.sender===e.conversation.otherPerson._id||i.sender===i.userId)&&(null===(a=e.conversation)||void 0===a||null===(r=a.messages)||void 0===r||r.push({_id:i.genId,body:i.msgBody||i.body,status:i.status||"pending",sender:i.sender,timestamp:(null===(c=i.timestamp)||void 0===c?void 0:c.toString())||(new Date).toString()}))},myMsgSeen:function(e,t){var n,a,r=t.payload;null===(n=e.conversation)||void 0===n||null===(a=n.messages)||void 0===a||a.forEach((function(e){e.sender==r.id&&(e.status="seen")}))},updateConversation:function(e,t){var n=t.payload,a=n.msg;if(a){var r,c=null===(r=e.list)||void 0===r?void 0:r.find((function(e){return e.otherPerson._id==n.msg.sender}));c&&c.messages.push(a)}},updateConversationSeen:function(e,t){var n,a,r=t.payload,c=null===(n=e.list)||void 0===n?void 0:n.find((function(e){return e.otherPerson._id==r.id}));c&&(null===(a=c.messages)||void 0===a||a.forEach((function(e){e.sender!=r.userId&&(e.status="seen")})))},emptyConversation:function(e){e.conversation={}},setLoading:function(e,t){var n=t.payload;e.loading=n},resetConversation:function(e){Object.assign(e,Ce)}},extraReducers:(r={},Object(W.a)(r,ve.pending,(function(e,t){t.payload;e.loading=!0})),Object(W.a)(r,ve.fulfilled,(function(e,t){var n=t.payload;e.list=n.conversations,e.loading=!1})),Object(W.a)(r,ve.rejected,(function(e,t){t.payload;e.list=[],e.loading=!1})),Object(W.a)(r,ye.pending,(function(e,t){t.payload;e.loading=!0})),Object(W.a)(r,ye.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.conversation=n.conversation})),Object(W.a)(r,ye.rejected,(function(e,t){t.payload;e.loading=!1})),Object(W.a)(r,we.pending,(function(e,t){t.payload,t.meta})),Object(W.a)(r,we.fulfilled,(function(e,t){t.payload,t.meta;e.conversation.messages.forEach((function(e){"pending"===e.status&&(e.status="delivered")}))})),Object(W.a)(r,we.rejected,(function(e,t){t.payload;var n,a,r=t.meta.arg.genId;e.conversation&&(e.conversation.messages=null===(n=e.conversation)||void 0===n||null===(a=n.messages)||void 0===a?void 0:a.filter((function(e){return e._id!=r})))})),r)}),Ie=Se.actions,Ae=Ie.addMsg,Be=Ie.myMsgSeen,Ue=Ie.updateConversation,We=Ie.updateConversationSeen,Ee=Ie.emptyConversation,Me=(Ie.setLoading,Ie.resetConversation),Te=Se.reducer,Re=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function Pe(e){var t=i.a.useState(null),n=Object(b.a)(t,2),a=n[0],r=n[1],c=Object(l.g)(),s=function(){r(null)},o=Re(),u=Object(X.b)();return Object(O.jsx)("div",{className:o.root,children:Object(O.jsx)(je.a,{position:"static",style:{backgroundColor:"#128c7e"},children:Object(O.jsxs)(be.a,{children:[Object(O.jsx)(he.a,{edge:"start",className:o.menuButton,color:"inherit","aria-label":"menu",onClick:function(){c.push("/user/new-conversation")},children:Object(O.jsx)(ge.a,{})}),Object(O.jsx)("div",{className:o.title}),Object(O.jsx)(he.a,{edge:"start",className:o.menuButton,color:"inherit","aria-label":"search",children:Object(O.jsx)(pe.a,{})}),Object(O.jsx)(he.a,{edge:"start",className:o.menuButton,color:"inherit","aria-label":"search",onClick:function(e){r(e.currentTarget)},children:Object(O.jsx)(me.a,{})}),Object(O.jsxs)(xe.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:s,children:[Object(O.jsx)(fe.a,{onClick:s,children:"Theme"}),Object(O.jsx)(fe.a,{onClick:function(){u(ae()),u(Me()),s()},children:"Logout"})]})]})})})}var Ve,qe=function(e){return e.conversation},He=Object(Y.a)(qe,(function(e){return e.loading})),Fe=(Object(Y.a)(qe,(function(e){return e.message})),Object(Y.a)(qe,(function(e){return e.error})),Object(Y.a)(qe,(function(e){return e.list}))),De=Object(Y.a)(qe,(function(e){return e.conversation})),Le="data:image/png;base64,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",ze=n(446),Xe=Object(x.a)((function(e){return{root:{width:"50px",height:"50px",padding:5,backgroundColor:"transparent"},img:{width:"100%",height:"100%",borderRadius:"100%"},modalImg:{width:"200px",height:"200px",position:"absolute",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"@media(max-width:600px)":{root:{width:"40px",height:"40px"}}}})),Je=function(e){var t=e.url,n=Xe(),a=i.a.useState(!1),r=Object(b.a)(a,2),c=r[0],s=r[1],o=function(){s(!0)};return Object(O.jsxs)("div",{className:n.root,children:[Object(O.jsx)("img",{src:t||Le,alt:Le,className:n.img,onClick:o}),Object(O.jsx)(ze.a,{open:c,onClose:function(){s(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(O.jsx)("img",{src:t||Le,alt:Le,className:n.modalImg,onClick:o})})]})},Ke=Object(x.a)((function(e){return{root:{padding:"5px",borderBottom:"1px solid rgba(165 , 165 , 165, 0.4)"},firstContainer:{flex:1,display:"flex",flexDirection:"column",alignItems:"start",paddingLeft:"30px",justifyContent:"center","& .msg-text":{textOverflow:"ellipsis"}},secondContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},msgCount:{color:"white",backgroundColor:"green",borderRadius:"100%",padding:"1px 7px"}}})),Ye=function(e){var t=e.conversation,n=Ke(),a=Object(l.g)(),r=t.messages.filter((function(e){return"delivered"===e.status&&e.sender==t.otherPerson._id})).length;return Object(O.jsx)(S.a,{className:n.root,onClick:function(){a.push("/user/chat-screen/".concat(t._id))},children:Object(O.jsxs)(v,{children:[Object(O.jsx)(y,{children:Object(O.jsx)(Je,{url:t.otherPerson.profilePic})}),Object(O.jsxs)(y,{className:n.firstContainer,xs:9,sm:10,md:10,lg:10,children:[Object(O.jsx)(I.a,{variant:"h5",style:{color:"#696363"},className:"msg-text",children:t.otherPerson.name||"unknown user"}),Object(O.jsx)(I.a,{variant:"h5",style:{fontWeight:r?750:400,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:t.messages[t.messages.length-1].body||""})]}),Object(O.jsx)(y,{className:n.secondContainer,style:{alignSelf:"flex-end",justifySelf:"flex-end"},md:1,children:r?Object(O.jsx)(I.a,{variant:"h5",className:n.msgCount,children:r||""}):null})]})})},Ze=function(){var e=Object(X.b)(),t=Object(X.c)(Fe),n=Object(X.c)(He);return i.a.useEffect((function(){(K.a.isEmpty(t)||K.a.isUndefined(Fe))&&e(ve())}),[]),Object(O.jsxs)(S.a,{id:"drawer-container",style:{position:"relative",padding:0,minHeight:"100vh"},children:[Object(O.jsx)(Pe,{}),n?Object(O.jsx)(A.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}):t&&t.map((function(e){return Object(O.jsx)(Ye,{conversation:e},e._id)}))]})},Ge=n(441),Qe=n(442),_e=n(210),$e=n.n(_e),et=n(209),tt=n.n(et),nt=n(211),at=n.n(nt),rt=Object(x.a)((function(e){return{root:{padding:"5px",maxWidth:"70%",width:"fit-content",margin:"5px",flexDirection:"column",alignItems:"flex-end",borderRadius:"5px"},msgBody:{wordBreak:"break-all",textAlign:"left"},timeContainer:{display:"flex",position:"relative",paddingLeft:"30px"}}})),ct=function(e){var t=e.msg,n=e.userId,a=rt(),r={hidden:{x:n==t.sender?"20vw":"-20vw",transition:{ease:"easeInOut"}},visible:{x:0,transition:{duration:7,type:"spring",stiffness:120}},exit:{x:"-100vw",transition:{ease:"easeInOut"}}};return Object(O.jsx)(le.a.div,{variants:r,initial:"hidden",animate:"visible",exit:"exit",children:Object(O.jsxs)(v,{className:a.root,style:{marginLeft:n==t.sender?"auto":"14px",backgroundColor:t.sender===n?"#dcf8c6":"white"},children:[Object(O.jsx)(y,{style:{alignSelf:"flex-start"},children:Object(O.jsx)(I.a,{variant:"h5",className:a.msgBody,children:t.body||""})}),Object(O.jsx)(y,{className:a.timeContainer,children:n==t.sender&&Object(O.jsxs)(O.Fragment,{children:["delivered"===t.status&&Object(O.jsx)(tt.a,{}),"seen"===t.status&&Object(O.jsx)($e.a,{style:{color:"#34B7F1"}}),"pending"===t.status&&Object(O.jsx)(at.a,{})]})})]})})},it=i.a.memo(ct),st=n.p+"static/media/chat-back.341414fc.jpg",ot=n(130),lt=n.n(ot),ut=n(212),dt=n.n(ut),jt=Object(x.a)((function(e){return{root:{backgroundImage:"url(".concat(st,")"),padding:0,height:"100vh",display:"flex",flexDirection:"column"},header:{padding:"5px 10px",backgroundColor:"#128c7e","@media(max-width:600px)":{padding:"5px 7px"}},otherName:{marginLeft:"40px",fontSize:"2rem","@media(max-width:600px)":{marginLeft:"15px"}},input:{backgroundColor:"white",borderRadius:"30px","&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{border:"2px solid #128c7e"}}},sendIcon:{color:"#128c7e"},footer:{width:"96%",margin:"0 auto 20px auto"},messageContainer:{overflowX:"hidden",overflowY:"scroll",flex:1,"&::-webkit-scrollbar":{width:"0.5em"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(171, 183, 183, 0.4)"},alignContent:"flex-start"},backArrow:{color:"white",marginRight:"5px"}}})),bt=function(e){var t,n,a,r=e.match,c=jt(),s=Object(X.c)(De),o=Object(X.c)($),u=Object(X.b)(),h=i.a.useState(""),p=Object(b.a)(h,2),m=p[0],x=p[1],g=Object(X.c)(He),N=i.a.useState(!1),k=Object(b.a)(N,2),C=k[0],A=k[1],B=i.a.useRef(null),W=Object(l.g)();i.a.useEffect((function(){return u(ye(r.params.conversationId)),function(){u(Ee())}}),[]),i.a.useEffect((function(){var e;(B.current&&E(),(null===s||void 0===s?void 0:s.otherPerson)&&!C)&&(A(!0),u(ke({phoneNo:null===s||void 0===s||null===(e=s.otherPerson)||void 0===e?void 0:e.phoneNo})));(null===s||void 0===s?void 0:s.otherPerson)&&u(We({id:s.otherPerson._id,userId:o._id}))}));var E=function(){B.current.scrollTop=B.current.scrollHeight},M=function(e){x(e.target.value)},T=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m,x(""),!t){e.next=5;break}return e.next=5,u(we({rcvNumber:s.otherPerson.phoneNo,msgBody:t,genId:Object(V.d)()}));case 5:E();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(S.a,{className:c.root,children:g||K.a.isEmpty(s)?Object(O.jsx)(Ge.a,{}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(v,{alignItems:"center",className:c.header,children:[Object(O.jsx)(dt.a,{className:c.backArrow,onClick:function(){W.goBack()}}),Object(O.jsx)(y,{children:Object(O.jsx)(Je,{url:null===s||void 0===s||null===(t=s.otherPerson)||void 0===t?void 0:t.profilePic})}),Object(O.jsx)(y,{children:Object(O.jsx)(I.a,{className:c.otherName,variant:"h5",color:"secondary",children:(null===s||void 0===s||null===(n=s.otherPerson)||void 0===n?void 0:n.name)||"unknown user"})})]}),Object(O.jsx)(f.a,{container:!0,className:c.messageContainer,ref:B,children:s&&(null===(a=s.messages)||void 0===a?void 0:a.map((function(e){var t;return Object(O.jsx)(y,{xs:12,md:12,children:Object(O.jsx)(it,{msg:e,userId:null===o||void 0===o?void 0:o._id})},e._id+((null===(t=e.timestamp)||void 0===t?void 0:t.toString())||""))})))}),Object(O.jsx)(v,{className:c.footer,children:Object(O.jsx)(y,{xs:!0,children:Object(O.jsx)(U.a,{placeholder:"Write A Message",id:"standard-start-adornment",variant:"outlined",fullWidth:!0,onChange:M,value:m,onKeyPress:function(e){"Enter"===e.key&&T()},InputProps:{endAdornment:Object(O.jsx)(Qe.a,{position:"end",children:Object(O.jsx)(w.a,{onClick:T,children:Object(O.jsx)(lt.a,{className:c.sendIcon})})}),className:c.input,onChange:M,autoComplete:"off"}})})})]})})},ht=Object(x.a)((function(e){return Object(h.a)({root:{marginTop:"auto",marginBottom:"auto",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},container:{justifyContent:"center",alignItems:"center",margin:"10px"}},E(e))})),pt=[{path:"signup",layout:"auth",component:oe},{path:"login",layout:"auth",component:de},{path:"home",layout:"user",component:Ze},{path:"chat-screen/:conversationId",layout:"user",component:bt},{path:"new-conversation",layout:"user",component:function(){var e=ht(),t=Object(X.b)(),n=Object(l.g)();return Object(O.jsx)(S.a,{className:e.root,children:Object(O.jsx)(v,{justifyContent:"center",alignItems:"center",children:Object(O.jsxs)(y,{xs:12,sm:9,md:6,className:e.cardContainer,children:[Object(O.jsx)(I.a,{variant:"h4",className:e.headerText,children:"New Conversation"}),Object(O.jsx)(p.d,{initialValues:{msg:"",phoneNo:""},enableReinitlization:!0,onSubmit:function(e,a){t(Ne({rcvNumber:e.phoneNo,genId:Object(V.d)(),msgBody:e.msg})).then((function(e){e.error||(t(ve()),n.push("/user/home"))}))},children:function(t){var n=t.values;t.errors,t.setFieldValue;return Object(O.jsxs)(p.c,{children:[Object(O.jsxs)(v,{className:e.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Phone Number"})}),Object(O.jsx)(y,{xs:10,sm:9,align:"left",children:Object(O.jsx)(p.b,{fullWidth:!0,name:"phoneNo",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)({variant:"outlined",fullWidth:!0},t))}})})]}),Object(O.jsxs)(v,{className:e.container,children:[Object(O.jsx)(y,{xs:10,sm:2,align:"left",children:Object(O.jsx)(B.a,{children:"Message"})}),Object(O.jsx)(y,{xs:10,sm:9,align:"left",children:Object(O.jsx)(p.b,{fullWidth:!0,name:"msg",children:function(e){var t=e.field;e.form;return Object(O.jsx)(U.a,Object(h.a)(Object(h.a)({variant:"outlined",fullWidth:!0},t),{},{type:"text"}))}})})]}),Object(O.jsx)(v,{className:e.container,children:Object(O.jsx)(y,{xs:12,align:"right",children:n.msg&&n.phoneNo&&Object(O.jsx)(w.a,{className:e.saveButton,type:"submit",children:Object(O.jsx)(lt.a,{})})})})]})}})]})})})}}],mt=function(e){return e.common},xt=Object(Y.a)(mt,(function(e){return e.message})),ft=Object(Y.a)(mt,(function(e){return e.error})),Ot=n(450),gt=n(447),vt={message:"",error:""},yt=Object(V.c)({name:"Common",initialState:vt,reducers:{setError:function(e,t){var n=t.payload;e.error=n||"unknown Error"},emptyError:function(e){e.error=""},setMessage:function(e,t){var n=t.payload;e.message=n||"unknown Error"},emptyMessage:function(e){e.message=""}},extraReducers:(Ve={},Object(W.a)(Ve,L.fulfilled,(function(e,t){t.payload;Object.assign(e,vt),e.message="User added Successfully"})),Object(W.a)(Ve,L.rejected,(function(e,t){Object.assign(e,vt),e.error=t.payload.error||"network Error"})),Object(W.a)(Ve,z.rejected,(function(e,t){Object.assign(e,vt),e.error=t.payload.error||"network Error"})),Object(W.a)(Ve,ve.rejected,(function(e,t){var n=t.payload;Object.assign(e,vt),e.error=(null===n||void 0===n?void 0:n.error)||"newwork Error"})),Object(W.a)(Ve,ye.rejected,(function(e,t){t.payload;Object.assign(e,vt),e.error="error in network"})),Object(W.a)(Ve,we.rejected,(function(e,t){t.payload,t.meta;Object.assign(e,vt),e.error="try again"})),Object(W.a)(Ve,Ne.rejected,(function(e,t){var n=t.payload;t.meta;Object.assign(e,vt),e.error=n.error||"network Error"})),Ve)}),wt=yt.actions,Nt=(wt.setError,wt.setMessage,wt.emptyError),kt=wt.emptyMessage,Ct=yt.reducer;function St(e){return Object(O.jsx)(gt.a,Object(h.a)({elevation:6,variant:"filled"},e))}var It=Object(x.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),At=function(e){var t=e.isOpen,n=e.text,a=e.type,r=void 0===a?"success":a,c=It(),s=i.a.useState(t),o=Object(b.a)(s,2),l=o[0],u=o[1],d=Object(X.b)(),j=function(e,t){"clickaway"!==t&&u(!1)};return i.a.useEffect((function(){u(t);var e=setTimeout((function(){t&&d("success"===r?kt():Nt())}),6e3);return function(){clearInterval(e)}}),[t,r]),Object(O.jsx)("div",{className:c.root,children:Object(O.jsx)(Ot.a,{open:l,autoHideDuration:6e3,onClose:j,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(O.jsx)(St,{onClose:j,severity:r,children:n})})})},Bt=i.a.memo(At),Ut={hidden:{x:"-100vw",transition:{ease:"easeInOut"}},visible:{x:0,transition:{duration:1,type:"spring",stiffness:120}},exit:{x:"-100vw",transition:{ease:"easeInOut"}}},Wt=function(){var e=Object(X.c)(xt),t=Object(X.c)(ft),n=Object(l.g)(),a=Object(X.c)($);return i.a.useEffect((function(){a&&n.push("/user/home")}),[a,n]),Object(O.jsxs)(le.a.div,{variants:Ut,initial:"hidden",animate:"visible",exit:"exit",children:[Object(O.jsx)(Bt,{isOpen:!!e,text:e}),Object(O.jsx)(Bt,{isOpen:!!t,text:t,type:"error"}),Object(O.jsxs)(l.d,{children:[pt.map((function(e){return"auth"===e.layout&&Object(O.jsx)(l.b,{path:"/".concat(e.layout,"/").concat(e.path),component:e.component},"/".concat(e.layout,"/").concat(e.path))})),Object(O.jsx)(l.a,{from:"/auth",to:"/auth/signup"})]})]})},Et=n(213),Mt=n.n(Et),Tt={hidden:{x:"+100vw",transition:{ease:"easeInOut"}},visible:{x:0,transition:{duration:.7,type:"spring",stiffness:80}},exit:{x:"-100vw",transition:{ease:"easeInOut"}}},Rt=function(){var e=Object(X.c)($),t=Object(l.g)(),n=Object(X.b)(),a=Object(X.c)((function(e){var t,n,a;return null===(t=e.conversation)||void 0===t||null===(n=t.conversation)||void 0===n||null===(a=n.otherPerson)||void 0===a?void 0:a.phoneNo})),r=Object(X.c)(xt),c=Object(X.c)(ft);i.a.useEffect((function(){if(e){var r=Mt.a.connect("",{query:{user:e.phoneNo}});return r.on("new-message-rcv",(function(t){n(Ae(Object(h.a)(Object(h.a)({},t.message),{},{userId:e._id}))),a&&n(ke({phoneNo:a})),n(Ue({msg:t.message}))})),r.on("your-msg-seen",(function(t){n(Be({id:e._id}))})),r.on("new-conversation-rcv",(function(e){n(ve())})),function(){r.close()}}t.push("/auth")}),[e,t,n,a]);return Object(O.jsxs)(le.a.div,{variants:Tt,initial:"hidden",animate:"visible",exit:"exit",children:[Object(O.jsx)(Bt,{isOpen:!!r,text:r}),Object(O.jsx)(Bt,{isOpen:!!c,text:c,type:"error"}),Object(O.jsxs)(l.d,{children:[pt.map((function(e){return"user"===e.layout&&Object(O.jsx)(l.b,{path:"/".concat(e.layout,"/").concat(e.path),component:e.component},"/".concat(e.layout,"/").concat(e.path))})),Object(O.jsx)(l.a,{from:"/user",to:"/user/home "})]})]})},Pt=n(449),Vt=n(215),qt=n(443),Ht=Object(Vt.a)({typography:{fontFamily:["Josefin Sans","sans-serif"].join(","),h5:{"@media(max-width:600px)":{fontSize:"20px"}}},palette:{secondary:{dark:"#1b1b",main:"#FFF"}}});var Ft=function(){var e=Object(l.h)();return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(qt.a,{theme:Ht,children:Object(O.jsx)(Pt.a,{children:Object(O.jsxs)(l.d,{location:e,children:[Object(O.jsx)(l.b,{path:"/auth",component:Wt}),Object(O.jsx)(l.b,{path:"/user",component:Rt}),Object(O.jsx)(l.a,{from:"/",to:"/user/home"})]},e.key)})})})},Dt=n(62),Lt=n(149),zt=n.n(Lt),Xt=n(38),Jt={key:"chat-root",storage:zt.a,blacklist:["auth","conversation","common"]},Kt={key:"auth",storage:zt.a,blacklist:["loading","error","message"]},Yt=Object(Xt.b)({auth:Object(Dt.g)(Kt,ce),conversation:Te,common:Ct}),Zt=Object(Dt.g)(Jt,Yt),Gt=Object(V.a)({reducer:Zt,middleware:function(e){return e({serializableCheck:{ignoredActions:[Dt.a,Dt.f,Dt.b,Dt.c,Dt.d,Dt.e]}})}}),Qt=Object(Dt.h)(Gt),_t=Gt,$t=n(214);o.a.render(Object(O.jsx)(X.a,{store:_t,children:Object(O.jsx)($t.a,{loading:null,persistor:Qt,children:Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(ie.a,{children:Object(O.jsx)(Ft,{})})})})}),document.getElementById("root"))}},[[388,1,2]]]);
//# sourceMappingURL=main.5c5e3ab5.chunk.js.map